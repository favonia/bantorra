<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Manager (bantorra.Bantorra.Manager)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">bantorra</a> &#x00BB; <a href="../index.html">Bantorra</a> &#x00BB; Manager</nav><h1>Module <code>Bantorra.Manager</code></h1><p>Library managers.</p><nav class="toc"><ul><li><a href="#types">Types</a></li><li><a href="#initialization">Initialization</a></li><li><a href="#library-loading">Library Loading</a></li><li><a href="#composite-resolver">Composite Resolver</a></li></ul></nav></header><aside></aside><section><header><h2 id="types"><a href="#types" class="anchor"></a>Types</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The type of library managers.</p></dd></dl><dl><dt class="spec type" id="type-library"><a href="#type-library" class="anchor"></a><code><span class="keyword">type</span> library</code></dt><dd><p>The abstract type of libraries.</p></dd></dl><dl><dt class="spec type" id="type-unitpath"><a href="#type-unitpath" class="anchor"></a><code><span class="keyword">type</span> unitpath</code><code> = <span>string list</span></code></dt><dd><p>The type of unit paths.</p></dd></dl></section><section><header><h2 id="initialization"><a href="#initialization" class="anchor"></a>Initialization</h2></header><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <span>resolvers:<span><span>(string * <a href="../Resolver/index.html#type-t">Resolver.t</a>)</span> list</span></span> <span>&#45;&gt;</span> <span>anchor:string</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>init ~resolvers ~anchor</code> initiates a library manager.</p><dl><dt>parameter resolvers</dt><dd><p>An association list as a mapping from resolver names to available resolvers. See <a href="../Resolver/index.html"><code>Resolver</code></a>.</p></dd></dl><dl><dt>parameter anchor</dt><dd><p>The file name of the library anchors.</p></dd></dl></dd></dl></section><section><header><h2 id="library-loading"><a href="#library-loading" class="anchor"></a>Library Loading</h2></header><dl><dt class="spec value" id="val-load_library"><a href="#val-load_library" class="anchor"></a><code><span class="keyword">val</span> load_library : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../BantorraBasis/File/index.html#type-filepath">BantorraBasis.File.filepath</a> <span>&#45;&gt;</span> <a href="index.html#type-library">library</a></code></dt><dd><p><code>load_library manager library_root</code> explicitly loads the library at the directory <code>library_root</code> from the file system. By loading, it means the manager retrieves necessary information from the file system to resolve unit paths within the library. The intended use of this function is to explicitly load the current library via <code>load_library</code> and let the manager automatically load dependencies (if any).</p><p>If a library was already loaded, the cached version will be used instead. The dependencies are not loaded eagerly.</p></dd></dl><dl><dt class="spec value" id="val-locate_anchor_from_file"><a href="#val-locate_anchor_from_file" class="anchor"></a><code><span class="keyword">val</span> locate_anchor_from_file : <span>anchor:string</span> <span>&#45;&gt;</span> <span>suffix:string</span> <span>&#45;&gt;</span> <a href="../../BantorraBasis/File/index.html#type-filepath">BantorraBasis.File.filepath</a> <span>&#45;&gt;</span> <a href="../../BantorraBasis/File/index.html#type-filepath">BantorraBasis.File.filepath</a> * <a href="index.html#type-unitpath">unitpath</a></code></dt><dd><p><code>locate_anchor_from_file ~anchor ~suffix filepath</code> assumes the unit at <code>filepath</code> resides in some library and tries to find the root of the library by locating the file <code>anchor</code>. It returns the root of the found library and a unit path within the library that could potentially point to the input unit. (See the caveat below.)</p><p>This is a helper function to prepare the arguments to <a href="index.html#val-load_library"><code>load_library</code></a>.</p><p>Note that the returned unit path did not take into account the dependencies that could shadow the unit through mounting. For example, if the returned unit path is <code>[&quot;a&quot;; &quot;b&quot;]</code> but there is a dependency mounted at <code>[&quot;a&quot;]</code>, then the original unit is actually not accessible by that unit path. This is thus only a retraction of the unit path resolution. The application should use <a href="index.html#val-to_unitpath"><code>to_unitpath</code></a> or <a href="index.html#val-to_filepath"><code>to_filepath</code></a> to re-resolve the unit path returned by <code>locate_anchor</code> instead of assuming that it would point to <code>filepath</code>.</p></dd></dl><dl><dt class="spec value" id="val-locate_anchor_from_dir"><a href="#val-locate_anchor_from_dir" class="anchor"></a><code><span class="keyword">val</span> locate_anchor_from_dir : <span>anchor:string</span> <span>&#45;&gt;</span> <a href="../../BantorraBasis/File/index.html#type-filepath">BantorraBasis.File.filepath</a> <span>&#45;&gt;</span> <a href="../../BantorraBasis/File/index.html#type-filepath">BantorraBasis.File.filepath</a> * <a href="index.html#type-unitpath">unitpath</a></code></dt><dt class="spec value" id="val-locate_anchor_from_cwd"><a href="#val-locate_anchor_from_cwd" class="anchor"></a><code><span class="keyword">val</span> locate_anchor_from_cwd : <span>anchor:string</span> <span>&#45;&gt;</span> <a href="../../BantorraBasis/File/index.html#type-filepath">BantorraBasis.File.filepath</a> * <a href="index.html#type-unitpath">unitpath</a></code></dt></dl></section><section><header><h2 id="composite-resolver"><a href="#composite-resolver" class="anchor"></a>Composite Resolver</h2><p>These functions will automatically load the dependencies.</p></header><dl><dt class="spec value" id="val-to_unitpath"><a href="#val-to_unitpath" class="anchor"></a><code><span class="keyword">val</span> to_unitpath : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-library">library</a> <span>&#45;&gt;</span> <a href="index.html#type-unitpath">unitpath</a> <span>&#45;&gt;</span> <a href="index.html#type-library">library</a> * <a href="index.html#type-unitpath">unitpath</a></code></dt><dd><p><code>to_unitpath manager lib unitpath</code> resolves <code>unitpath</code> and returns the <i>eventual</i> library where the unit belongs and the local unit path pointing to the unit.</p></dd></dl><dl><dt class="spec value" id="val-to_filepath"><a href="#val-to_filepath" class="anchor"></a><code><span class="keyword">val</span> to_filepath : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-library">library</a> <span>&#45;&gt;</span> <a href="index.html#type-unitpath">unitpath</a> <span>&#45;&gt;</span> <span>suffix:string</span> <span>&#45;&gt;</span> <a href="index.html#type-library">library</a> * <a href="../../BantorraBasis/File/index.html#type-filepath">BantorraBasis.File.filepath</a></code></dt><dd><p><code>resolver manager lib unitpath ~suffix</code> resolves <code>unitpath</code> in the library <code>lib</code> and returns the <i>eventual</i> library where the unit belongs and the corresponding file path of the unit with the specified suffix. It is similar to <a href="index.html#val-to_unitpath"><code>to_unitpath</code></a> but returns a file path instead of a unit path.</p><dl><dt>parameter suffix</dt><dd><p>The suffix shared by all the units in the file system.</p></dd></dl></dd></dl></section></div></body></html>