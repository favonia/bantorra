<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BantorraResolvers__UserConfig (bantorra.BantorraResolvers__UserConfig)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">bantorra</a> &#x00BB; BantorraResolvers__UserConfig</nav><h1>Module <code>BantorraResolvers__UserConfig</code></h1><h2 id="introduction"><a href="#introduction" class="anchor"></a>Introduction</h2><p>A resolver that reads the YAML user configuration at <code>$XDG_CONFIG_HOME/${app_name}/libraries</code>. Here is an example:</p><pre>format: &quot;1.0.0&quot;
libraries:
- name: num
  version: &quot;3&quot;
  at: &quot;/usr/lib/something/num34&quot;
- name: tcp
  version: &quot;2&quot;
  at: &quot;/usr/lib/something/tcp21&quot;</pre><p>The resolver takes YAML arguments in one of the following formats:</p><pre>name: &quot;bantorra&quot;
verson: &quot;0.1.0&quot;</pre><pre>name: &quot;bantorra&quot;
verson: null</pre><pre>name: &quot;bantorra&quot;</pre><p>A missing version is understood as the version <code>null</code>. Therefore, the last two specifications are identical.</p><p>Versions are compared using structural equality. There is no smart comparison or ordering between versions. Each version is completely independent of each other; <code>null</code> only matches <code>null</code>, not any string. However, one could have multiple entries as follows to dispatch on versions:</p><pre>format: &quot;1.0.0&quot;
libraries:
- name: num
  version: &quot;2&quot;
  at: &quot;/usr/lib/something/num25&quot;
- name: num
  version: &quot;2.5&quot;
  at: &quot;/usr/lib/something/num25&quot;
- name: num
  version: &quot;3&quot;
  at: &quot;/usr/lib/something/num34&quot;
- name: num
  version: &quot;3.4&quot;
  at: &quot;/usr/lib/something/num34&quot;
- name: num
  version: null
  at: &quot;/usr/lib/something/num34&quot;
- name: tcp
  version: &quot;2&quot;
  at: &quot;/usr/lib/something/tcp21&quot;
- name: tcp
  version: &quot;2.1&quot;
  at: &quot;/usr/lib/something/tcp21&quot;</pre><h2 id="the-builder"><a href="#the-builder" class="anchor"></a>The Builder</h2><nav class="toc"><ul><li><a href="#configuration-i/o">Configuration I/O</a></li></ul></nav></header><dl><dt class="spec value" id="val-resolver"><a href="#val-resolver" class="anchor"></a><code><span class="keyword">val</span> resolver : <span>app_name:string</span> <span>&#45;&gt;</span> <span>config:string</span> <span>&#45;&gt;</span> <a href="../Bantorra/Resolver/index.html#type-t">Bantorra.Resolver.t</a></code></dt><dd><p><code>resolver ~app_name ~config</code> constructs a resolver that reads the user configuration. The location of the user configuration is given by <a href="../BantorraBasis/Xdg/index.html#val-get_config_home"><code>BantorraBasis.Xdg.get_config_home</code></a>. All paths are normalized and turned into absolute paths with respect to the current working directory using <a href="../BantorraBasis/File/index.html#val-normalize_dir"><code>BantorraBasis.File.normalize_dir</code></a> .</p></dd></dl><dl><dt class="spec value" id="val-clear_cached_configs"><a href="#val-clear_cached_configs" class="anchor"></a><code><span class="keyword">val</span> clear_cached_configs : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Configuration files are all cached to reduce I/O load, but perhaps you are bypassing this module to modify them. In that case, one should call this function to force rereading configuration files.</p></dd></dl><section><header><h2 id="configuration-i/o"><a href="#configuration-i/o" class="anchor"></a>Configuration I/O</h2></header><dl><dt class="spec type" id="type-versioned_library"><a href="#type-versioned_library" class="anchor"></a><code><span class="keyword">type</span> versioned_library</code><code> = </code><code>{</code><table class="record"><tr id="type-versioned_library.name" class="anchored"><td class="def field"><a href="#type-versioned_library.name" class="anchor"></a><code>name : string;</code></td></tr><tr id="type-versioned_library.version" class="anchored"><td class="def field"><a href="#type-versioned_library.version" class="anchor"></a><code>version : <span>string option</span>;</code></td></tr></table><code>}</code></dt><dd><p>The type of versioned library names. <code>None</code> corresponds to <code>null</code> and <code>Some ver</code> corresponds to explicit versions.</p></dd></dl><dl><dt class="spec type" id="type-config"><a href="#type-config" class="anchor"></a><code><span class="keyword">type</span> config</code><code> = </code><code>{</code><table class="record"><tr id="type-config.dict" class="anchored"><td class="def field"><a href="#type-config.dict" class="anchor"></a><code>dict : <span><span>(<a href="index.html#type-versioned_library">versioned_library</a> * string)</span> list</span>;</code></td></tr></table><code>}</code></dt><dd><p>The type of configurations as association lists.</p></dd></dl><dl><dt class="spec value" id="val-default_config"><a href="#val-default_config" class="anchor"></a><code><span class="keyword">val</span> default_config : <a href="index.html#type-config">config</a></code></dt><dd><p>Default configuration that is empty.</p></dd></dl><dl><dt class="spec value" id="val-read_opt"><a href="#val-read_opt" class="anchor"></a><code><span class="keyword">val</span> read_opt : <span>app_name:string</span> <span>&#45;&gt;</span> <span>config:string</span> <span>&#45;&gt;</span> <span><a href="index.html#type-config">config</a> option</span></code></dt><dd><p>Try to read the configuration file. Note that the results are cached. See <a href="index.html#val-clear_cached_configs"><code>clear_cached_configs</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-write"><a href="#val-write" class="anchor"></a><code><span class="keyword">val</span> write : <span>app_name:string</span> <span>&#45;&gt;</span> <span>config:string</span> <span>&#45;&gt;</span> <a href="index.html#type-config">config</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Write the configuration file. The cache will be updated upon successful writing. See <a href="index.html#val-clear_cached_configs"><code>clear_cached_configs</code></a>.</p></dd></dl></section></div></body></html>