<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BantorraBasis__File (bantorra.BantorraBasis__File)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">bantorra</a> &#x00BB; BantorraBasis__File</nav><h1>Module <code>BantorraBasis__File</code></h1><nav class="toc"><ul><li><a href="#pure-filename-calculation">Pure Filename Calculation</a></li><li><a href="#basic-i/o">Basic I/O</a></li><li><a href="#directories">Directories</a></li><li><a href="#locating-files">Locating Files</a></li><li><a href="#special-directories">Special Directories</a></li></ul></nav></header><dl><dt class="spec type" id="type-filepath"><a href="#type-filepath" class="anchor"></a><code><span class="keyword">type</span> filepath</code><code> = string</code></dt></dl><section><header><h2 id="pure-filename-calculation"><a href="#pure-filename-calculation" class="anchor"></a>Pure Filename Calculation</h2></header><dl><dt class="spec value" id="val-(/)"><a href="#val-(/)" class="anchor"></a><code><span class="keyword">val</span> (/) : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <a href="index.html#type-filepath">filepath</a></code></dt><dd><p><code>p / q</code> concatenates paths <code>p</code> and <code>q</code>. The path <code>q</code> is assumed to be a relative path.</p></dd></dl><dl><dt class="spec value" id="val-join"><a href="#val-join" class="anchor"></a><code><span class="keyword">val</span> join : <span><a href="index.html#type-filepath">filepath</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-filepath">filepath</a></code></dt><dd><p>The n-ary version of <a href="index.html#val-(/)"><code>(/)</code></a></p></dd></dl></section><section><header><h2 id="basic-i/o"><a href="#basic-i/o" class="anchor"></a>Basic I/O</h2></header><dl><dt class="spec value" id="val-writefile"><a href="#val-writefile" class="anchor"></a><code><span class="keyword">val</span> writefile : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(unit, <span>[&gt; <span>`SystemError of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>writefile path str</code> writes the string <code>str</code> the file at <code>path</code> (in binary mode). If there was already a file at <code>path</code>, it will be overwritten.</p></dd></dl><dl><dt class="spec value" id="val-readfile"><a href="#val-readfile" class="anchor"></a><code><span class="keyword">val</span> readfile : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <span><span>(string, <span>[&gt; <span>`SystemError of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>readfile path</code> reads the content of string <code>str</code> the file at <code>path</code> (in binary mode). If there was already a file at <code>path</code>, it will be overwritten.</p></dd></dl></section><section><header><h2 id="directories"><a href="#directories" class="anchor"></a>Directories</h2></header><dl><dt class="spec value" id="val-getcwd"><a href="#val-getcwd" class="anchor"></a><code><span class="keyword">val</span> getcwd : unit <span>&#45;&gt;</span> <a href="index.html#type-filepath">filepath</a></code></dt><dt class="spec value" id="val-chdir"><a href="#val-chdir" class="anchor"></a><code><span class="keyword">val</span> chdir : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <span><span>(unit, <span>[&gt; <span>`SystemError of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-ensure_dir"><a href="#val-ensure_dir" class="anchor"></a><code><span class="keyword">val</span> ensure_dir : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <span><span>(unit, <span>[&gt; <span>`SystemError of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>ensure_dir dir</code> effectively implements <code>mkdir dir</code> in OCaml.</p></dd></dl><dl><dt class="spec value" id="val-protect_cwd"><a href="#val-protect_cwd" class="anchor"></a><code><span class="keyword">val</span> protect_cwd : <span>(<a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>protect_cwd f</code> runs <code>f cwd</code> where <code>cwd</code> is the current working directory, and restore the current working directory after the computation is done, even when an exception is raised.</p></dd></dl><dl><dt class="spec value" id="val-normalize_dir"><a href="#val-normalize_dir" class="anchor"></a><code><span class="keyword">val</span> normalize_dir : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-filepath">filepath</a>, <span>[&gt; <span>`SystemError of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>normalize_dir dir</code> uses <code>Sys.chdir</code> and <code>Sys.getcwd</code> to normalize a path. Symbolic links and special directories such as <code>.</code> and <code>..</code> will be resolved and the result will be an absolute path on many systems. The current working directory will be restored after the computation.</p></dd></dl><dl><dt class="spec value" id="val-parent_of_normalized_dir"><a href="#val-parent_of_normalized_dir" class="anchor"></a><code><span class="keyword">val</span> parent_of_normalized_dir : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <span><a href="index.html#type-filepath">filepath</a> option</span></code></dt><dd><p><code>parent_of_normalized_dir dir</code> calculates the parent of a normalized directory <code>dir</code>. If <code>dir</code> is already the root directory, then this function returns <code>None</code>; otherwise it returns <code>Some parent</code> where <code>parent</code> is the parent directory. The result could be wrong if <code>dir</code> was not already normalized.</p></dd></dl></section><section><header><h2 id="locating-files"><a href="#locating-files" class="anchor"></a>Locating Files</h2></header><dl><dt class="spec value" id="val-file_exists"><a href="#val-file_exists" class="anchor"></a><code><span class="keyword">val</span> file_exists : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-locate_anchor"><a href="#val-locate_anchor" class="anchor"></a><code><span class="keyword">val</span> locate_anchor : <span>anchor:string</span> <span>&#45;&gt;</span> <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-filepath">filepath</a> * <span>string list</span>, <span>[&gt; <span>`AnchorNotFound of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>locate_anchor ~anchor dir</code> finds the closest regular file named <code>anchor</code> in <code>dir</code> or its ancestors in the file system tree.</p><dl><dt>parameter dir</dt><dd><p>The starting directory. It will be normalized with respect to the current working director.</p></dd></dl><dl><dt>returns</dt><dd><p>(1) the first directory that holds a regular file named <code>anchor</code> on the way from <code>dir</code> to the root directory; and (2) the relative path from the returned directory to <code>dir</code>. The exception <code>Not_found</code> is raised if such a file cannot be found.</p><p>For example, on a typical Linux system, suppose there is no file called <code>anchor.txt</code> under directiors <code>/usr/lib/gcc/</code> and <code>/usr/lib/</code>, but there is such a file under <code>/usr/</code>. <code>locate_anchor ~anchor:&quot;anchor.txt&quot; &quot;/usr/lib/gcc&quot;</code> will return <code>&quot;/usr&quot;, [&quot;lib&quot;; &quot;gcc&quot;]</code> and <code>locate_anchor ~anchor:&quot;anchor.txt&quot; &quot;/usr&quot;</code> will return <code>&quot;/usr&quot;, []</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-hijacking_anchors_exist"><a href="#val-hijacking_anchors_exist" class="anchor"></a><code><span class="keyword">val</span> hijacking_anchors_exist : <span>anchor:string</span> <span>&#45;&gt;</span> <span>root:<a href="index.html#type-filepath">filepath</a></span> <span>&#45;&gt;</span> <span>string list</span> <span>&#45;&gt;</span> bool</code></dt></dl></section><section><header><h2 id="special-directories"><a href="#special-directories" class="anchor"></a>Special Directories</h2></header><dl><dt class="spec value" id="val-get_home"><a href="#val-get_home" class="anchor"></a><code><span class="keyword">val</span> get_home : unit <span>&#45;&gt;</span> <span><a href="index.html#type-filepath">filepath</a> option</span></code></dt><dt class="spec value" id="val-expand_home"><a href="#val-expand_home" class="anchor"></a><code><span class="keyword">val</span> expand_home : <a href="index.html#type-filepath">filepath</a> <span>&#45;&gt;</span> <a href="index.html#type-filepath">filepath</a></code></dt><dt class="spec value" id="val-get_xdg_config_home"><a href="#val-get_xdg_config_home" class="anchor"></a><code><span class="keyword">val</span> get_xdg_config_home : <span>?&#8288;macos_as_linux:bool</span> <span>&#45;&gt;</span> <span>app_name:string</span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-filepath">filepath</a>, <span>[&gt; <span>`SystemError of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p>Get the per-user config directory based on <code>XDG_CONFIG_HOME</code> with reasonable default values on major platforms.</p></dd></dl><dl><dt class="spec value" id="val-get_xdg_cache_home"><a href="#val-get_xdg_cache_home" class="anchor"></a><code><span class="keyword">val</span> get_xdg_cache_home : <span>?&#8288;macos_as_linux:bool</span> <span>&#45;&gt;</span> <span>app_name:string</span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-filepath">filepath</a>, <span>[&gt; <span>`SystemError of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p>Get the per-user persistent cache directory based on <code>XDG_CACHE_HOME</code> with reasonable default values on major platforms.</p></dd></dl></section></div></body></html>